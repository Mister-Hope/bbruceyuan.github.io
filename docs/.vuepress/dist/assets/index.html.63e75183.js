import{_ as n,o as s,c as a,a as t}from"./app.984096d0.js";const e={},p=t(`<h1 id="\u5012\u6392\u7D22\u5F15\u7684\u5B9A\u4E49" tabindex="-1"><a class="header-anchor" href="#\u5012\u6392\u7D22\u5F15\u7684\u5B9A\u4E49" aria-hidden="true">#</a> \u5012\u6392\u7D22\u5F15\u7684\u5B9A\u4E49</h1><p>\u5982\u679C\u8BF4\u7F16\u7A0B\u5BF9\u4E8E\u7A0B\u5E8F\u5458\u6765\u8BF4\u662F\u57FA\u672C\u5DE5\u5177\uFF0C\u90A3\u4E48\u5728\u68C0\u7D22\u9886\u57DF\u6700\u91CD\u8981\u7684\u5DE5\u5177\u5C31\u662F\u5012\u6392\u7D22\u5F15\u3002\u56E0\u6B64\u6211\u4EEC\u5C06\u82B1\u4E09\u7BC7\u6587\u7AE0\u7684\u65B9\u5F0F\u89E3\u91CA\u4E00\u4E0B\u4EC0\u4E48\u662F\u5012\u6392\u7D22\u5F15\u3002</p><p>\u9996\u5148\u6211\u4EEC\u9700\u8981\u5148\u7406\u89E3\u4E00\u4E0B\u4EC0\u4E48\u662F\u7D22\u5F15\u3002\u5FEB\u901F\u627E\u5230\u6570\u636E\u3002\u6BD4\u5982\u5728\u6570\u636E\u5E93\u4E2D\uFF0C\u4E3B\u952E(unique)\u53EF\u4EE5\u5F53\u505A\u662F\u4E00\u79CD\u7D22\u5F15\u3002\u4E5F\u5C31\u662F\u8BF4\u6211\u4EEC\u901A\u8FC7\u4E00\u4E2A id \u627E\u5230\u4E00\u4E2A\u6587\u4EF6\u3002</p><blockquote><p>\u5012\u6392\u7D22\u5F15\uFF08\u82F1\u8BED\uFF1AInverted index\uFF09\uFF0C\u4E5F\u5E38\u88AB\u79F0\u4E3A\u53CD\u5411\u7D22\u5F15\u3001\u7F6E\u5165\u6863\u6848\u6216\u53CD\u5411\u6863\u6848\uFF0C\u662F\u4E00\u79CD\u7D22\u5F15\u65B9\u6CD5\uFF0C\u88AB\u7528\u6765\u5B58\u50A8\u5728\u5168\u6587\u641C\u7D22\u4E0B\u67D0\u4E2A\u5355\u8BCD\u5728\u4E00\u4E2A\u6587\u6863\u6216\u8005\u4E00\u7EC4\u6587\u6863\u4E2D\u7684\u5B58\u50A8\u4F4D\u7F6E\u7684\u6620\u5C04\u3002\u5B83\u662F\u6587\u6863\u68C0\u7D22\u7CFB\u7EDF\u4E2D\u6700\u5E38\u7528\u7684\u6570\u636E\u7ED3\u6784\u3002</p></blockquote><p>\u5012\u6392\u7D22\u5F15\u662F\u4E00\u4E2A\u76F4\u8BD1\u8FC7\u6765\u7684\u8BCD\uFF0C\u56E0\u6B64\u5F88\u5BB9\u6613\u51FA\u73B0\u8BEF\u89E3\u3002</p><p>\u4E00\u4E2A\u672A\u7ECF\u5904\u7406\u7684\u6570\u636E\u5E93\u4E2D\uFF0C\u4E00\u822C\u662F\u4EE5\u6587\u6863ID\u4F5C\u4E3A\u7D22\u5F15\uFF0C\u4EE5\u6587\u6863\u5185\u5BB9\u4F5C\u4E3A\u8BB0\u5F55\u3002\u800CInverted index \u6307\u7684\u662F\u5C06\u5355\u8BCD\u6216\u8BB0\u5F55\u4F5C\u4E3A\u7D22\u5F15\uFF0C\u5C06\u6587\u6863ID\u4F5C\u4E3A\u8BB0\u5F55\uFF0C\u8FD9\u6837\u4FBF\u53EF\u4EE5\u65B9\u4FBF\u5730\u901A\u8FC7\u5355\u8BCD\u6216\u8BB0\u5F55\u67E5\u627E\u5230\u5176\u6240\u5728\u7684\u6587\u6863\u3002</p><p>\u5F53\u7136\uFF0C\u5012\u6392\u7D22\u5F15\u4E0D\u6B62\u5E94\u7528\u4E8E\u5168\u6587\u641C\u7D22\u9886\u57DF\u3002\u6211\u4EEC\u53EF\u4EE5\u77E5\u9053\uFF0C\u4E00\u4E2A key \u53EF\u4EE5\u5BF9\u5E94\u4EC0\u4E48\u5185\u5BB9\u3002\u53EF\u4EE5\u662F {key: &quot;I love China&quot;}\uFF0C \u4E5F\u53EF\u4EE5\u662F\uFF1A {uid: {aid1, aid2, aid3}}\u3002</p><p>\u90A3\u4E48\u5728\u6587\u672C\u68C0\u7D22\u4E2D\uFF0C\u5012\u6392\u7D22\u5F15\u5C31\u662F\u53D8\u6210\u4E86 term: key. \u800C\u5728\u5E7F\u544A\u7684\u68C0\u7D22\u4E2D\uFF0C \u5C31\u53D8\u6210\u4E86 aid: uid\u3002</p><p>\u6211\u4EEC\u53EF\u4EE5\u7B80\u5355\u5B9E\u73B0\u4EE5\u4E0B\u5012\u6392\u7D22\u5F15\uFF1A</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> collections <span class="token keyword">import</span> defaultdict


<span class="token keyword">class</span> <span class="token class-name">InvertedIndex</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>documents <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        self<span class="token punctuation">.</span>inverted_index <span class="token operator">=</span> defaultdict<span class="token punctuation">(</span><span class="token builtin">set</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">insert_doc</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> doc<span class="token punctuation">)</span><span class="token punctuation">:</span>
        key <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>documents<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>documents<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> doc
        <span class="token comment"># \u8FD9\u91CC\u6211\u4EEC\u5047\u8BBE\u6587\u672C\u662F\u5E72\u51C0\u7684\uFF0C\u53EA\u8981\u7528 space tokenizer \u5C31\u884C\u4E86</span>
        words <span class="token operator">=</span> doc<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> word <span class="token keyword">in</span> words<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>inverted_index<span class="token punctuation">[</span>word<span class="token punctuation">]</span><span class="token punctuation">.</span>add<span class="token punctuation">(</span>key<span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">search</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> query<span class="token punctuation">)</span><span class="token punctuation">:</span>
        res_doc_ids <span class="token operator">=</span> <span class="token builtin">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        
        query_words <span class="token operator">=</span> query<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> word <span class="token keyword">in</span> query_words<span class="token punctuation">:</span>
            tmp_doc_ids <span class="token operator">=</span> self<span class="token punctuation">.</span>inverted_index<span class="token punctuation">[</span>word<span class="token punctuation">]</span>
            res_doc_ids <span class="token operator">=</span> res_doc_ids<span class="token punctuation">.</span>union<span class="token punctuation">(</span>tmp_doc_ids<span class="token punctuation">)</span>
        
        <span class="token comment"># \u8FD9\u6837\u5C31\u5F97\u5230\u4E86\u6240\u6709\u7684\u6587\u6863 id;  \u4FDD\u5B58\u5728 doc_ids \u4E2D</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span>self<span class="token punctuation">.</span>documents<span class="token punctuation">[</span>id_<span class="token punctuation">]</span> <span class="token keyword">for</span> id_ <span class="token keyword">in</span> res_doc_ids<span class="token punctuation">]</span>

<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    inverted_index <span class="token operator">=</span> InvertedIndex<span class="token punctuation">(</span><span class="token punctuation">)</span>
    inverted_index<span class="token punctuation">.</span>insert_doc<span class="token punctuation">(</span><span class="token string">&quot;he is teacher&quot;</span><span class="token punctuation">)</span>
    inverted_index<span class="token punctuation">.</span>insert_doc<span class="token punctuation">(</span><span class="token string">&quot;she is a dentist&quot;</span><span class="token punctuation">)</span>
    inverted_index<span class="token punctuation">.</span>insert_doc<span class="token punctuation">(</span><span class="token string">&quot;I am not a programmer, just a typist&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>inverted_index<span class="token punctuation">.</span>documents<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>inverted_index<span class="token punctuation">.</span>inverted_index<span class="token punctuation">)</span>
    <span class="token comment"># \u8FD9\u91CC\u6211\u4EEC\u53EA\u5B9E\u73B0 ES \u4E2D\u7684\u5E76\u96C6\u64CD\u4F5C\uFF0C\u4E5F\u5C31\u662F\u5224\u65AD\u51FA\u73B0\u5176\u4E2D\u4E00\u4E2A\u5C31\u884C\u4E86</span>
    docs <span class="token operator">=</span> inverted_index<span class="token punctuation">.</span>search<span class="token punctuation">(</span><span class="token string">&quot;typist dentist&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>docs<span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&quot;__main__&quot;</span><span class="token punctuation">:</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u770B\u5B8C\u8FD9\u6BB5\u4EE3\u7801\u540E\uFF0C\u7EC6\u5FC3\u7684\u5C0F\u4F19\u4F34\u4EEC\u4F1A\u53D1\u73B0\u6709\u4E24\u4E2A\u53EF\u4EE5\u4F18\u5316\u7684\u70B9\uFF0C\u8FD9\u91CC\u5F53\u505A\u8BFE\u540E\u4F5C\u4E1A\u5E03\u7F6E\u7ED9\u5927\u5BB6\uFF1F</p><p>(1) \u6839\u636E term \u83B7\u53D6\u5230\u4E86 document_ids \u4E4B\u540E\uFF0Cset \u4E4B\u95F4\u8981\u53D6\u4EA4\u96C6\uFF0C\u8FD9\u4E2A\u65F6\u95F4\u590D\u6742\u5EA6\u5F88\u9AD8 (2) \u7B2C\u4E8C\u4E2A\u5C31\u662F\uFF0C\u6211\u4EEC\u7684\u5355\u8BCD\u548CQuery\u5B9E\u5728\u662F\u592A\u591A\u4E86\u3002\u6211\u4EEC\u8981\u600E\u4E48\u624D\u80FD\u53BB\u5FEB\u901F\u5B9A\u4F4D\u5230\u8FD9\u4E2A term\u3002</p>`,12),o=[p];function i(c,u){return s(),a("div",null,o)}const d=n(e,[["render",i],["__file","index.html.vue"]]);export{d as default};
