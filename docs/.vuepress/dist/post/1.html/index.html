<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.51">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>2020年了，还有必要学习分词算法吗？ | BBruceyuan</title><meta name="description" content="分词算法，最大匹配，前向最大匹配，后向最大匹配，双向最大匹配算法的实现。">
    <link rel="modulepreload" href="/assets/app.984096d0.js"><link rel="modulepreload" href="/assets/index.html.6e1a5582.js"><link rel="modulepreload" href="/assets/index.html.bca13f54.js"><link rel="prefetch" href="/assets/index.html.ea5522af.js"><link rel="prefetch" href="/assets/10.html.3ac16c13.js"><link rel="prefetch" href="/assets/index.html.8f8eb586.js"><link rel="prefetch" href="/assets/index.html.e27fc14a.js"><link rel="prefetch" href="/assets/index.html.b538cc76.js"><link rel="prefetch" href="/assets/index.html.14d2b691.js"><link rel="prefetch" href="/assets/index.html.e27126d6.js"><link rel="prefetch" href="/assets/index.html.e6523ddf.js"><link rel="prefetch" href="/assets/index.html.682098df.js"><link rel="prefetch" href="/assets/index.html.a40522cf.js"><link rel="prefetch" href="/assets/index.html.6e22f24b.js"><link rel="prefetch" href="/assets/index.html.4d0acfb6.js"><link rel="prefetch" href="/assets/index.html.ed0d6383.js"><link rel="prefetch" href="/assets/index.html.95f95daa.js"><link rel="prefetch" href="/assets/index.html.c4f93853.js"><link rel="prefetch" href="/assets/index.html.910f6986.js"><link rel="prefetch" href="/assets/index.html.8cefc30b.js"><link rel="prefetch" href="/assets/index.html.a998699b.js"><link rel="prefetch" href="/assets/index.html.f7364ca2.js"><link rel="prefetch" href="/assets/index.html.efec9e5d.js"><link rel="prefetch" href="/assets/index.html.ca2cb867.js"><link rel="prefetch" href="/assets/index.html.9fa0f948.js"><link rel="prefetch" href="/assets/index.html.e2627e65.js"><link rel="prefetch" href="/assets/index.html.8e739cf1.js"><link rel="prefetch" href="/assets/index.html.2e2d4ff4.js"><link rel="prefetch" href="/assets/index.html.c5752e01.js"><link rel="prefetch" href="/assets/index.html.260a970e.js"><link rel="prefetch" href="/assets/index.html.eaa3180b.js"><link rel="prefetch" href="/assets/index.html.46b6787d.js"><link rel="prefetch" href="/assets/index.html.ab71fa56.js"><link rel="prefetch" href="/assets/index.html.10323e27.js"><link rel="prefetch" href="/assets/index.html.1e56c066.js"><link rel="prefetch" href="/assets/index.html.4095fad6.js"><link rel="prefetch" href="/assets/index.html.15e7bd58.js"><link rel="prefetch" href="/assets/index.html.5332a1fc.js"><link rel="prefetch" href="/assets/index.html.dc951a8e.js"><link rel="prefetch" href="/assets/index.html.04ea1ac9.js"><link rel="prefetch" href="/assets/index.html.16453983.js"><link rel="prefetch" href="/assets/404.html.c3e557d0.js"><link rel="prefetch" href="/assets/index.html.fe51653e.js"><link rel="prefetch" href="/assets/10.html.279ff622.js"><link rel="prefetch" href="/assets/index.html.e01ac4e5.js"><link rel="prefetch" href="/assets/index.html.6b7c6394.js"><link rel="prefetch" href="/assets/index.html.63e75183.js"><link rel="prefetch" href="/assets/index.html.748d8ebd.js"><link rel="prefetch" href="/assets/index.html.12148688.js"><link rel="prefetch" href="/assets/index.html.07a12558.js"><link rel="prefetch" href="/assets/index.html.d3b2e68c.js"><link rel="prefetch" href="/assets/index.html.234cbb26.js"><link rel="prefetch" href="/assets/index.html.79f2741a.js"><link rel="prefetch" href="/assets/index.html.3b77e6b2.js"><link rel="prefetch" href="/assets/index.html.e9b64d54.js"><link rel="prefetch" href="/assets/index.html.39c523c7.js"><link rel="prefetch" href="/assets/index.html.1f13c46b.js"><link rel="prefetch" href="/assets/index.html.1183c641.js"><link rel="prefetch" href="/assets/index.html.fca5defc.js"><link rel="prefetch" href="/assets/index.html.c35381a0.js"><link rel="prefetch" href="/assets/index.html.6614eb46.js"><link rel="prefetch" href="/assets/index.html.e04e4814.js"><link rel="prefetch" href="/assets/index.html.86c93828.js"><link rel="prefetch" href="/assets/index.html.c0f1f37c.js"><link rel="prefetch" href="/assets/index.html.a90340a6.js"><link rel="prefetch" href="/assets/index.html.755101a7.js"><link rel="prefetch" href="/assets/index.html.0636cee4.js"><link rel="prefetch" href="/assets/index.html.43f2319e.js"><link rel="prefetch" href="/assets/index.html.3c11b554.js"><link rel="prefetch" href="/assets/index.html.247d3496.js"><link rel="prefetch" href="/assets/index.html.492d5172.js"><link rel="prefetch" href="/assets/index.html.eb46ff92.js"><link rel="prefetch" href="/assets/index.html.ba0b98cd.js"><link rel="prefetch" href="/assets/index.html.04ada86e.js"><link rel="prefetch" href="/assets/index.html.01b29758.js"><link rel="prefetch" href="/assets/index.html.d9a39197.js"><link rel="prefetch" href="/assets/index.html.acfe7db6.js"><link rel="prefetch" href="/assets/index.html.f30edbf9.js"><link rel="prefetch" href="/assets/index.html.5d9b5ca0.js"><link rel="prefetch" href="/assets/index.html.457aef00.js"><link rel="prefetch" href="/assets/404.html.aa587c86.js">
    <link rel="stylesheet" href="/assets/style.910dd5a1.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name">BBruceyuan</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="归档"><span class="title">归档</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="归档"><span class="title">归档</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/post/4.html/" class="" aria-label="随笔"><!--[--><!--]--> 随笔 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/post/1.html/" class="router-link-active router-link-exact-active router-link-active" aria-label="技术"><!--[--><!--]--> 技术 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/link.html/" class="" aria-label="友链"><!--[--><!--]--> 友链 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/about/" class="" aria-label="关于我"><!--[--><!--]--> 关于我 <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/bbruceyuan" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="归档"><span class="title">归档</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="归档"><span class="title">归档</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/post/4.html/" class="" aria-label="随笔"><!--[--><!--]--> 随笔 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/post/1.html/" class="router-link-active router-link-exact-active router-link-active" aria-label="技术"><!--[--><!--]--> 技术 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/link.html/" class="" aria-label="友链"><!--[--><!--]--> 友链 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/about/" class="" aria-label="关于我"><!--[--><!--]--> 关于我 <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/bbruceyuan" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">随笔 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/post/12.html/" class="sidebar-item" aria-label="我不喜欢失眠"><!--[--><!--]--> 我不喜欢失眠 <!--[--><!--]--></a><!----></li><li><a href="/post/13.html/" class="sidebar-item" aria-label="倒着写的文章"><!--[--><!--]--> 倒着写的文章 <!--[--><!--]--></a><!----></li><li><a href="/post/14.html/" class="sidebar-item" aria-label="BBruceyuan的近期不靠谱事件"><!--[--><!--]--> BBruceyuan的近期不靠谱事件 <!--[--><!--]--></a><!----></li><li><a href="/post/16.html/" class="sidebar-item" aria-label="周四，又见周四"><!--[--><!--]--> 周四，又见周四 <!--[--><!--]--></a><!----></li><li><a href="/post/18.html/" class="sidebar-item" aria-label="我从没这么喜欢待在家里"><!--[--><!--]--> 我从没这么喜欢待在家里 <!--[--><!--]--></a><!----></li><li><a href="/post/19.html/" class="sidebar-item" aria-label="我的黄金时代已经过去"><!--[--><!--]--> 我的黄金时代已经过去 <!--[--><!--]--></a><!----></li><li><a href="/post/20.html/" class="sidebar-item" aria-label="三月的三分之一"><!--[--><!--]--> 三月的三分之一 <!--[--><!--]--></a><!----></li><li><a href="/post/21.html/" class="sidebar-item" aria-label="翻页了"><!--[--><!--]--> 翻页了 <!--[--><!--]--></a><!----></li><li><a href="/post/22.html/" class="sidebar-item" aria-label="三月末的陈词"><!--[--><!--]--> 三月末的陈词 <!--[--><!--]--></a><!----></li><li><a href="/post/23.html/" class="sidebar-item" aria-label="一个粉丝的自我修养"><!--[--><!--]--> 一个粉丝的自我修养 <!--[--><!--]--></a><!----></li><li><a href="/post/24.html/" class="sidebar-item" aria-label="洗澡"><!--[--><!--]--> 洗澡 <!--[--><!--]--></a><!----></li><li><a href="/post/25.html/" class="sidebar-item" aria-label="《白非立上进记合集》"><!--[--><!--]--> 《白非立上进记合集》 <!--[--><!--]--></a><!----></li><li><a href="/post/26.html/" class="sidebar-item" aria-label="《弗兰克扬小说合集》"><!--[--><!--]--> 《弗兰克扬小说合集》 <!--[--><!--]--></a><!----></li><li><a href="/post/27.html/" class="sidebar-item" aria-label="香格里拉封闭培训的七天"><!--[--><!--]--> 香格里拉封闭培训的七天 <!--[--><!--]--></a><!----></li><li><a href="/post/28.html/" class="sidebar-item" aria-label="我没想到我会误入相亲素材"><!--[--><!--]--> 我没想到我会误入相亲素材 <!--[--><!--]--></a><!----></li><li><a href="/post/30.html/" class="sidebar-item" aria-label="崔同学视角的「我没想到我会误入相亲素材」"><!--[--><!--]--> 崔同学视角的「我没想到我会误入相亲素材」 <!--[--><!--]--></a><!----></li><li><a href="/post/31.html/" class="sidebar-item" aria-label="和崔同学日常段子集锦"><!--[--><!--]--> 和崔同学日常段子集锦 <!--[--><!--]--></a><!----></li><li><a href="/post/32.html/" class="sidebar-item" aria-label="How-I-Met-Bruce?"><!--[--><!--]--> How-I-Met-Bruce? <!--[--><!--]--></a><!----></li><li><a href="/post/33.html/" class="sidebar-item" aria-label="Life Influenced By Point"><!--[--><!--]--> Life Influenced By Point <!--[--><!--]--></a><!----></li><li><a href="/post/4.html/" class="sidebar-item" aria-label="记EMNLP2020投稿"><!--[--><!--]--> 记EMNLP2020投稿 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading active">技术 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/post/1.html/" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="2020年了，还有必要学习分词算法吗？"><!--[--><!--]--> 2020年了，还有必要学习分词算法吗？ <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/post/1.html/#背景" class="router-link-active router-link-exact-active sidebar-item" aria-label="背景"><!--[--><!--]--> 背景 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/post/1.html/#分词是什么" class="router-link-active router-link-exact-active sidebar-item" aria-label="分词是什么？"><!--[--><!--]--> 分词是什么？ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/post/1.html/#基于词典的最大匹配算法" class="router-link-active router-link-exact-active sidebar-item" aria-label="基于词典的最大匹配算法"><!--[--><!--]--> 基于词典的最大匹配算法 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/post/1.html/#_1-最大正向匹配" class="router-link-active router-link-exact-active sidebar-item" aria-label="1. 最大正向匹配"><!--[--><!--]--> 1. 最大正向匹配 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/post/1.html/#_2-最大后向匹配算法" class="router-link-active router-link-exact-active sidebar-item" aria-label="2 最大后向匹配算法"><!--[--><!--]--> 2 最大后向匹配算法 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/post/1.html/#_3-双向匹配算法" class="router-link-active router-link-exact-active sidebar-item" aria-label="3 双向匹配算法"><!--[--><!--]--> 3 双向匹配算法 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/post/1.html/#reference" class="router-link-active router-link-exact-active sidebar-item" aria-label="Reference"><!--[--><!--]--> Reference <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/post/2.html/" class="sidebar-item" aria-label="深度学习时代，分词算法的真实应用实例"><!--[--><!--]--> 深度学习时代，分词算法的真实应用实例 <!--[--><!--]--></a><!----></li><li><a href="/post/3.html/" class="sidebar-item" aria-label="关于隐马尔可夫模型(HMM)，需要知道什么？"><!--[--><!--]--> 关于隐马尔可夫模型(HMM)，需要知道什么？ <!--[--><!--]--></a><!----></li><li><a href="/post/5.html/" class="sidebar-item" aria-label="Transition-based Directed Graph Construction for Emotion-Cause Pair Extraction (中文介绍)"><!--[--><!--]--> Transition-based Directed Graph Construction for Emotion-Cause Pair Extraction (中文介绍) <!--[--><!--]--></a><!----></li><li><a href="/post/7.html/" class="sidebar-item" aria-label="Must-read Papers on Emotion-Cause Pair Extraction"><!--[--><!--]--> Must-read Papers on Emotion-Cause Pair Extraction <!--[--><!--]--></a><!----></li><li><a href="/post/8.html/" class="sidebar-item" aria-label="01之间均匀分区取两点构成三角形的概率-证明加代码实现"><!--[--><!--]--> 01之间均匀分区取两点构成三角形的概率-证明加代码实现 <!--[--><!--]--></a><!----></li><li><a href="/post/9.html/" class="sidebar-item" aria-label="简单方法增加Query召回的多样性"><!--[--><!--]--> 简单方法增加Query召回的多样性 <!--[--><!--]--></a><!----></li><li><a href="/post/10.html" class="sidebar-item" aria-label="Python实现蓄水池算法"><!--[--><!--]--> Python实现蓄水池算法 <!--[--><!--]--></a><!----></li><li><a href="/post/17.html/" class="sidebar-item" aria-label="NER上分利器：实体边界重定位"><!--[--><!--]--> NER上分利器：实体边界重定位 <!--[--><!--]--></a><!----></li><li><a href="/post/29.html/" class="sidebar-item" aria-label="倒排索引原理与python实现"><!--[--><!--]--> 倒排索引原理与python实现 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h2 id="背景" tabindex="-1"><a class="header-anchor" href="#背景" aria-hidden="true">#</a> 背景</h2><p>上周，和某同学聊天的时候提到关于深度学习时代下，分词算法的必要性。这引起了我的一点思考，是的，由于最近深度学习的发展，并且由于机器算力的增加，字级别的模型开始慢慢的展露头角，字级别的的模型效果已经可以说超过词级别的模型了[1]，并且在前沿的自然语言处理中都开始有放弃词级别模型的研究，尤其是在命名实体识别之类的序列标注任务上面，但是，分词真的就没有用了吗？</p><p>答案显然是否定的。我们可以假设一个场景，如果百度或淘宝用户输入了一个句子(query)，难道会拿整个句子去做召回吗？显然是不可能的，肯定要先对 query 进行分词，进行一些纠错，改写，然后去文档库中做尽量多的匹配。</p><p>既然分词分词在真实场景下还是有用的，作为最简单的NLP入门学习算法，分词当然是初学者作为入门练习的最佳实践。那么常见的分词算法有哪些呢？最简单就是前向和后向匹配算法，HMM，CRF等等。下面主要介绍最大匹配算法的思路和代码实现。</p><h2 id="分词是什么" tabindex="-1"><a class="header-anchor" href="#分词是什么" aria-hidden="true">#</a> 分词是什么？</h2><p>这个问题应该是没有必要提的，但是为了任务的定义，还是提一下比较好一点。给定一句话，比如</p><blockquote><p>我硕士阶段在研究生命科学 我/硕士/阶段/在/研究/生命科学</p></blockquote><p>有人会说，这不是我们小学的时候学的断句吗？emmmm... 事实好像就是如此，但是这对于一个小学生也能做的事情，对于机器来说确是比较难做到的。</p><h2 id="基于词典的最大匹配算法" tabindex="-1"><a class="header-anchor" href="#基于词典的最大匹配算法" aria-hidden="true">#</a> 基于词典的最大匹配算法</h2><p>最大匹配算法[2]主要包括正向最大匹配算法、逆向最大匹配算法、双向匹配算法等</p><h3 id="_1-最大正向匹配" tabindex="-1"><a class="header-anchor" href="#_1-最大正向匹配" aria-hidden="true">#</a> 1. 最大正向匹配</h3><p>最大正向匹配是一个非常简单且有效的方法。简单的说对给定的一段话，从左往右找，找到尽可能长的 一个片段，让这个片段存在于给定的词典中，然后讲这个片段找出来，画一条分词线，然后对这句话剩下的部分做同样的操作。如果第一个字符不是词典中任何一个词的前缀，那么这个字符单独作为一个词 (可以用字典树Trie Tree 实现，后续文章 来讲）。如果最后只剩下一个字了，那么这个字也是单独的一个词。继续以前面的“我硕士阶段在研究生命科学”为例。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>第一步：初始使用整个句子去查找，查看 “我硕士阶段在研究生命科学”在不在词典中？不在。
第二步：去掉最后一个词，变成了“我硕士阶段在研究生命科”在不在词典中？不在。
第三步，再次去掉一个词，操作同理。
........
第12步，只剩下一个词了，“我”，只剩一个字了，进行分词。下次变成从 “硕士阶段在研究生命科学”开始。
第13步，重复第一步，查看 “硕士阶段在研究生命科学”在不在词典中？不在。
........
第 i 步，查看 “硕士”在不在词典中？在。那么就进行分词，下次 变成了 “阶段在研究生命科学”开始。
....... （后面同理，应该能懂了
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>算法的实现：</strong></p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">forward_maximum_match_segmentation</span><span class="token punctuation">(</span>string<span class="token punctuation">,</span> dictionary<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> string <span class="token operator">==</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span>
    <span class="token keyword">for</span> idx <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># tmp words 是前面几个字符</span>
        tmp_words <span class="token operator">=</span> string<span class="token punctuation">[</span><span class="token punctuation">:</span>idx<span class="token punctuation">]</span>
        remainder_str <span class="token operator">=</span> string<span class="token punctuation">[</span>idx<span class="token punctuation">:</span><span class="token punctuation">]</span>
        <span class="token keyword">if</span> tmp_words <span class="token keyword">in</span> dictionary <span class="token keyword">or</span> idx <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>
            <span class="token comment"># 使用迭代器，意思你就可以使用</span>
            <span class="token comment"># for item in forward_maximum_match_segmentation(xx) 遍历分词结果</span>
            <span class="token keyword">yield</span> tmp_words
            forward_maximum_match_segmentation<span class="token punctuation">(</span>
                remainder_str<span class="token punctuation">,</span> dictionary<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-最大后向匹配算法" tabindex="-1"><a class="header-anchor" href="#_2-最大后向匹配算法" aria-hidden="true">#</a> 2 最大后向匹配算法</h3><p>如果你有运行一下前向算法，那么你就可以发现，运用前向算法很容易就把上面提到的例句分错了 。具体体现在：</p><blockquote><p>研究生命科学。 因为“研究生”和“生命科学”都会在字典中，那么按照最大前向匹配原则，就会匹配成 研究生，而不是 研究。 最次如果使用前向算法，最终结果为“我/硕士/阶段/在/研究生/命/科学”。</p></blockquote><p>运用前向分词算法的结果是错的，最大后向匹配，可以解决一部分这种问题（词语重复问题）。最大后向匹配算法和前向算法是一样的，只是逻辑 变成从后往前了。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>第一步，和前向一样，
第二步，输入变成了“硕士阶段在研究生命科学”，然后继续查看，
...... （后续逻辑和前向是一样的了
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>区别</strong> ：前向是每次都是去掉后一个词，后向是去掉前一个词。</p><p><strong>算法的实现：</strong></p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">backward_maximum_match_segmentation</span><span class="token punctuation">(</span>string<span class="token punctuation">,</span> dictionary<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> string <span class="token operator">==</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span>
    <span class="token keyword">for</span> idx <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># tmp words 是后面几个字符</span>
        tmp_words <span class="token operator">=</span> string<span class="token punctuation">[</span>idx<span class="token punctuation">:</span><span class="token punctuation">]</span>
        <span class="token comment"># 剩下的就是前面的几个单词了</span>
        remainder_str <span class="token operator">=</span> string<span class="token punctuation">[</span><span class="token punctuation">:</span>idx<span class="token punctuation">]</span>
        <span class="token keyword">if</span> tmp_words <span class="token keyword">in</span> dictionary <span class="token keyword">or</span> idx <span class="token operator">==</span> <span class="token builtin">len</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">:</span>
            <span class="token keyword">yield</span> tmp_words
            backward_maximum_match_segmentation<span class="token punctuation">(</span>
                remainder_str<span class="token punctuation">,</span> dictionary<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以上两种算法实现参考[3]。</p><h3 id="_3-双向匹配算法" tabindex="-1"><a class="header-anchor" href="#_3-双向匹配算法" aria-hidden="true">#</a> 3 双向匹配算法</h3><p>双向匹配算法当然指的是用前向算法分词一遍，用后向算法分词一遍。因为有文献[4]证明，对于中文来说，90%的句子最大正向匹配和最大反向匹配结果是一样的，剩下9%两者其中一个是正确的。剩下的，只有大约1%的句子，两者分词结果相同，但是结果其实是错的。因此双向匹配算法很常用。</p><p>双向匹配算法使用的启发式算法来选择最终结果描述如下：</p><blockquote><p>1.正反向分词结果词数不同，则取分词数量较少的那个。 2.分词结果词数相同 ​ a.分词结果相同，就说明没有歧义，可返回任意一个。 ​ b.分词结果不同，返回其中单字较少的那个</p></blockquote><p><strong>具体算法实现</strong></p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">bi_directional_maximum_match_segmentation</span><span class="token punctuation">(</span>string<span class="token punctuation">,</span> dictionary<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">_count_single</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 计算单字的数量</span>
        cnt <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> res<span class="token punctuation">:</span>
            <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>
                cnt <span class="token operator">+=</span> <span class="token number">1</span>
        <span class="token keyword">return</span> cnt

    fm_res <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>forward_maximum_match_segmentation<span class="token punctuation">(</span>string<span class="token punctuation">,</span> dictionary<span class="token punctuation">)</span><span class="token punctuation">)</span>
    bm_res <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>backward_maximum_match_segmentation<span class="token punctuation">(</span>string<span class="token punctuation">,</span> dictionary<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment"># 选词少的</span>
    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>fm_res<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>bm_res<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> bm_res
    <span class="token keyword">elif</span> <span class="token builtin">len</span><span class="token punctuation">(</span>fm_res<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>bm_res<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> fm_res

    <span class="token comment"># 如果两个完全相同 (考虑一下两者是相反的</span>
    <span class="token keyword">if</span> fm_res <span class="token operator">==</span> <span class="token builtin">reversed</span><span class="token punctuation">(</span>bm_res<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> fm_res
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> _count_single<span class="token punctuation">(</span>fm_res<span class="token punctuation">)</span> <span class="token operator">&gt;</span> _count_single<span class="token punctuation">(</span>bm_res<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> bm_res
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> fm_res
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="reference" tabindex="-1"><a class="header-anchor" href="#reference" aria-hidden="true">#</a> Reference</h2><p>[1] Is Word Segmentation Necessary for Deep Learning of Chinese Representations? [2] <a href="https://baike.baidu.com/item/%E6%9C%80%E5%A4%A7%E5%8C%B9%E9%85%8D%E7%AE%97%E6%B3%95" target="_blank" rel="noopener noreferrer">最大分词算法<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> [3] https://zhuanlan.zhihu.com/p/92102484 [4] <a href="http://59.108.48.5/course/mining/12-13spring/%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE/02-01%E6%B1%89%E8%AF%AD%E8%87%AA%E5%8A%A8%E5%88%86%E8%AF%8D%E7%A0%94%E7%A9%B6%E8%AF%84%E8%BF%B0.pdf" target="_blank" rel="noopener noreferrer">汉语自动分词研究评述<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: bbruceyuan@tencent.com">bbruceyuan</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><!----><span class="next"><a href="/post/2.html/" class="" aria-label="深度学习时代，分词算法的真实应用实例"><!--[--><!--]--> 深度学习时代，分词算法的真实应用实例 <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.984096d0.js" defer></script>
  </body>
</html>
