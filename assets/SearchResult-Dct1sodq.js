import{u as U,f as te,g as le,h as Y,i as ae,P as se,t as oe,j as re,k as S,l as H,m as ie,n as M,p as l,q as ue,R as T,s as ne,v as ce,x as he,C as me,y as pe,z as ge,A as ye,B as ve,D as Ee,E as de,F as Ae,G as $,H as I,I as be,J as w,K as Be}from"./app-DvRy08z3.js";const fe=["/","/about.html","/blog-feed.html","/link.html","/hands-on-code/from-self-attention-to-multi-head-self-attention.html","/hands-on-code/hands-on-causallm-decoder.html","/introduction-to-computing-advertising/","/introduction-to-computing-advertising/ad-nums.html","/introduction-to-computing-advertising/quick-tutorial.html","/blog/2020-year-summary.html","/blog/2021-year-summary.html","/blog/2022-year-summary.html","/blog/2023-year-summary.html","/blog/11.html","/blog/12.html","/blog/13.html","/blog/14.html","/blog/16.html","/blog/18.html","/blog/19.html","/blog/20.html","/blog/21.html","/blog/22.html","/blog/23.html","/blog/24.html","/blog/bai-fei-li-shang-jin-ji.html","/blog/hub-of-fu-lan-ke-yang.html","/blog/27.html","/blog/blind-date-from-bruce.html","/blog/blind-date-from-miss-cui.html","/blog/joke-with-miss-cui.html","/blog/how-i-met-bruce.html","/blog/life-influenced-by-point.html","/blog/2020-emnlp-submition.html","/blog/ten-years-after-the-college-entrance-examination.html","/blog/how-to-keep-mental-health-working-in-bytedance.html","/blog/talk-with-dayu.html","/blog/work-i-can-insist-more-time.html","/post/python-type-challenge-advanced.html","/post/python-type-challenge-basic.html","/post/python-type-challenge-intermediate.html","/post/make-flomo-better.html","/post/raycast-tutorial-1.html","/post/1.html","/post/10.html","/post/17.html","/post/2.html","/post/29.html","/post/3.html","/post/5.html","/post/7.html","/post/8.html","/post/9.html","/post/git-config-path-seperation.html","/404.html","/hands-on-code/","/blog/","/post/","/category/","/category/hands-on-code/","/category/%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/","/category/%E6%9D%82%E8%B0%88/","/category/python-type-challenge/","/category/%E7%AC%94%E8%AE%B0%E6%8A%98%E8%85%BE%E8%AE%B0/","/category/raycast-turorial/","/category/%E5%88%86%E8%AF%8D/","/category/%E9%9D%A2%E8%AF%95%E9%94%A6%E5%9B%8A/","/category/%E5%BA%8F%E5%88%97%E6%A0%87%E6%B3%A8/","/category/%E7%AE%97%E6%B3%95%E5%A6%99%E7%94%A8/","/category/%E6%90%9C%E7%B4%A2%E6%8A%80%E6%9C%AF/","/category/%E5%AE%9E%E4%BD%93%E8%AF%86%E5%88%AB/","/category/%E6%83%85%E6%84%9F-%E5%8E%9F%E5%9B%A0%E5%AF%B9%E6%8A%BD%E5%8F%96(ecpe)/","/tag/","/tag/transformer/","/tag/%E6%9D%82%E8%B0%88/","/tag/%E5%B7%A5%E4%BD%9C/","/tag/%E6%88%91%E7%9A%84%E6%9C%8B%E5%8F%8B/","/tag/python-typing-tutorial/","/tag/python-type-tutorial/","/tag/%E5%88%86%E8%AF%8D/","/tag/%E7%AE%97%E6%B3%95%E5%AE%9E%E7%8E%B0/","/tag/%E9%9D%A2%E8%AF%95%E9%94%A6%E5%9B%8A/","/tag/ner/","/tag/%E7%AE%97%E6%B3%95%E5%A6%99%E7%94%A8/","/tag/%E5%80%92%E6%8E%92%E7%B4%A2%E5%BC%95/","/tag/%E6%90%9C%E7%B4%A2%E6%8A%80%E6%9C%AF/","/tag/%E5%BA%8F%E5%88%97%E6%A0%87%E6%B3%A8/","/tag/%E5%85%A5%E9%97%A8%E7%AE%97%E6%B3%95/","/tag/%E5%AE%9E%E4%BD%93%E8%AF%86%E5%88%AB/","/tag/ecpe/","/tag/%E6%95%B0%E5%AD%A6%E9%A2%98/","/tag/git/","/article/","/star/","/timeline/"],ke="SEARCH_PRO_QUERY_HISTORY",E=U(ke,[]),He=()=>{const{queryHistoryCount:a}=w,s=a>0;return{enabled:s,queryHistory:E,addQueryHistory:o=>{s&&(E.value=Array.from(new Set([o,...E.value.slice(0,a-1)])))},removeQueryHistory:o=>{E.value=[...E.value.slice(0,o),...E.value.slice(o+1)]}}},L=a=>fe[a.id]+("anchor"in a?`#${a.anchor}`:""),we="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:_}=w,d=U(we,[]),Fe=()=>{const a=_>0;return{enabled:a,resultHistory:d,addResultHistory:s=>{if(a){const o={link:L(s),display:s.display};"header"in s&&(o.header=s.header),d.value=[o,...d.value.slice(0,_-1)]}},removeResultHistory:s=>{d.value=[...d.value.slice(0,s),...d.value.slice(s+1)]}}},Re=a=>{const s=me(),o=Y(),F=pe(),i=S(0),B=H(()=>i.value>0),g=ge([]);return ye(()=>{const{search:y,terminate:R}=ve(),A=be(c=>{const b=c.join(" "),{searchFilter:D=p=>p,splitWord:C,suggestionsFilter:j,...v}=s.value;b?(i.value+=1,y(c.join(" "),o.value,v).then(p=>D(p,b,o.value,F.value)).then(p=>{i.value-=1,g.value=p}).catch(p=>{console.warn(p),i.value-=1,i.value||(g.value=[])})):g.value=[]},w.searchDelay-w.suggestDelay);M([a,o],([c])=>A(c),{immediate:!0}),Ee(()=>{R()})}),{isSearching:B,results:g}};var Ce=te({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(a,{emit:s}){const o=le(),F=Y(),i=ae(se),{enabled:B,addQueryHistory:g,queryHistory:y,removeQueryHistory:R}=He(),{enabled:A,resultHistory:c,addResultHistory:b,removeResultHistory:D}=Fe(),C=B||A,j=oe(a,"queries"),{results:v,isSearching:p}=Re(j),r=re({isQuery:!0,index:0}),h=S(0),m=S(0),P=H(()=>C&&(y.value.length>0||c.value.length>0)),Q=H(()=>v.value.length>0),q=H(()=>v.value[h.value]||null),z=()=>{const{isQuery:e,index:t}=r;t===0?(r.isQuery=!e,r.index=e?c.value.length-1:y.value.length-1):r.index=t-1},G=()=>{const{isQuery:e,index:t}=r;t===(e?y.value.length-1:c.value.length-1)?(r.isQuery=!e,r.index=0):r.index=t+1},J=()=>{h.value=h.value>0?h.value-1:v.value.length-1,m.value=q.value.contents.length-1},K=()=>{h.value=h.value<v.value.length-1?h.value+1:0,m.value=0},V=()=>{m.value<q.value.contents.length-1?m.value+=1:K()},N=()=>{m.value>0?m.value-=1:J()},x=e=>e.map(t=>Be(t)?t:l(t[0],t[1])),W=e=>{if(e.type==="customField"){const t=de[e.index]||"$content",[u,k=""]=Ae(t)?t[F.value].split("$content"):t.split("$content");return e.display.map(n=>l("div",x([u,...n,k])))}return e.display.map(t=>l("div",x(t)))},f=()=>{h.value=0,m.value=0,s("updateQuery",""),s("close")},X=()=>B?l("ul",{class:"search-pro-result-list"},l("li",{class:"search-pro-result-list-item"},[l("div",{class:"search-pro-result-title"},i.value.queryHistory),y.value.map((e,t)=>l("div",{class:["search-pro-result-item",{active:r.isQuery&&r.index===t}],onClick:()=>{s("updateQuery",e)}},[l($,{class:"search-pro-result-type"}),l("div",{class:"search-pro-result-content"},e),l("button",{class:"search-pro-remove-icon",innerHTML:I,onClick:u=>{u.preventDefault(),u.stopPropagation(),R(t)}})]))])):null,Z=()=>A?l("ul",{class:"search-pro-result-list"},l("li",{class:"search-pro-result-list-item"},[l("div",{class:"search-pro-result-title"},i.value.resultHistory),c.value.map((e,t)=>l(T,{to:e.link,class:["search-pro-result-item",{active:!r.isQuery&&r.index===t}],onClick:()=>{f()}},()=>[l($,{class:"search-pro-result-type"}),l("div",{class:"search-pro-result-content"},[e.header?l("div",{class:"content-header"},e.header):null,l("div",e.display.map(u=>x(u)).flat())]),l("button",{class:"search-pro-remove-icon",innerHTML:I,onClick:u=>{u.preventDefault(),u.stopPropagation(),D(t)}})]))])):null;return ie("keydown",e=>{if(a.isFocusing){if(Q.value){if(e.key==="ArrowUp")N();else if(e.key==="ArrowDown")V();else if(e.key==="Enter"){const t=q.value.contents[m.value];g(a.queries.join(" ")),b(t),o.push(L(t)),f()}}else if(A){if(e.key==="ArrowUp")z();else if(e.key==="ArrowDown")G();else if(e.key==="Enter"){const{index:t}=r;r.isQuery?(s("updateQuery",y.value[t]),e.preventDefault()):(o.push(c.value[t].link),f())}}}}),M([h,m],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>l("div",{class:["search-pro-result-wrapper",{empty:a.queries.length?!Q.value:!P.value}],id:"search-pro-results"},a.queries.length?p.value?l(ue,{hint:i.value.searching}):Q.value?l("ul",{class:"search-pro-result-list"},v.value.map(({title:e,contents:t},u)=>{const k=h.value===u;return l("li",{class:["search-pro-result-list-item",{active:k}]},[l("div",{class:"search-pro-result-title"},e||i.value.defaultTitle),t.map((n,ee)=>{const O=k&&m.value===ee;return l(T,{to:L(n),class:["search-pro-result-item",{active:O,"aria-selected":O}],onClick:()=>{g(a.queries.join(" ")),b(n),f()}},()=>[n.type==="text"?null:l(n.type==="title"?ne:n.type==="heading"?ce:he,{class:"search-pro-result-type"}),l("div",{class:"search-pro-result-content"},[n.type==="text"&&n.header?l("div",{class:"content-header"},n.header):null,l("div",W(n))])])})])})):i.value.emptyResult:C?P.value?[X(),Z()]:i.value.emptyHistory:i.value.emptyResult)}});export{Ce as default};
